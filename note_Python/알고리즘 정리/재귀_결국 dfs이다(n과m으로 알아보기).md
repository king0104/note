## 재귀 : 결국 dfs 탐색이다

n과m 12번을 풀면서 헷갈리는 부분이 있었다. 어떤 상태에서 다음 상태로 넘어가는 것이 재귀함수인데, 현재 상태와 다음 상태를 뭘로 정의해야하는지 너무 어려웠다. 

n과m은, 주어진 수를 이용해서, 원하는 조건(오름차순, 숫자의 길이 등)에 맞도록 수를 나열하는 문제였다.

즉, 매 순간 주어진 수 set에서 하나의 수를 선택해야하는 상황인 것이다.

![image-20221226023851897](/Users/yoon/Library/Application Support/typora-user-images/image-20221226023851897.png)

이 말은, 현재 단계에서 고를 수 있는 상태값이 "주어진 수 set" 이라는 것이다. 그렇다면, 상태값이 정해졌다. 우리는 주어진 수 set을 하나의 상태로 보고, 그 상태들을 재귀로 완전탐색 하면 되는 것이다. 여기에 조건만 잘 붙여주면 되는 것이다.



dfs는 시작점이 있고, 거기서 트리처럼 퍼져나가는 느낌이라 재귀에 대한 감을 잡기가 더 편한 것이 있었다.

그런데 이 경우에는, 시작점이 하나로 정해지는 것이 아니였다. 만약, 주어진 수 set이 1,2,3이면, 시작 노드가 3개가 되는 것이다. 이렇게 되면 dfs를 생각할 때 현재 상태에서 다음 상태들로 뻗어나가는 그림을 그릴 수가 없게 된다. 그래서, 뭔가 재귀 함수를 짤 때도 코드 내에서 현재 상태와 다음 상태의 값이 딱딱 나누어떨어지지가 않았다. 이것이 가장 큰 걸림돌이였고, 재귀함수에서 사용하는 파라미터들이 같은 상태값을 지녀야 좋은 코드가 나올 수 있어서 고민을 했다.(예를 들어, 사용하는 파라미터가 ans, cnt이면, 현재까지 선택한 수들의 집합 - ans, 현재까지 선택한 수의 갯수 - cnt 이런 식으로 말이다. 이게 조금 잘못되면, ans가 이전 상태까지 선택한 수들이 집합, cnt가  현재까지 선택한 수의 갯수 이렇게 된다.) **(결국, 내가 하고 싶은 건 현재 상태에서는 현재 상태값들만 존재하기를 바랐다. 그래야 코드를 읽을 때도, 고칠 때도 논리적으로 편하기 때문이다.)**

![image-20221226023838116](/Users/yoon/Library/Application Support/typora-user-images/image-20221226023838116.png)



dfs와 같이 생각되면 좋겠다는 생각을 했다. dfs는 현재 상태에서 다음 상태로 넘어가는 부분이 확실하게 정해져있다. 하나의 현재 위치에서, 다음 여러 위치를 재귀적으로 들어가는 부분이 명확하게 정해져 있고, 변수도 y,x 로 ny, nx를 만들어서 다음 dfs 에 넘겨준다. 이렇게 현재 상태 값(y,x)과 다음 상태 값(ny,nx) 가 완전히 분리되기를 바랐다.



그러기 위해서는 **현재 상태를 하나로 특정짓는 것**이 필요했다. 문제는 시작점이 3개로 나눠져있다는 것이다. 근데 잘 생각해보니, 시작점은 결국 하나로 특정할 수 있었다. **ans = '', cnt = 0 이라는 가장 기본상태가 존재하고, 이걸 시작점으로 정해버리면, dfs와 완전히 같은 로직을 사용할 수 있게 되는 것이다!**

이게 혁신적이였던게, 내가 재귀를 짤 때 생각하는 그림 (현재 상태 하나에서 다음 여려 상태로 넘어가는 그림)을 완전하게 적용할 수 있었기 때문이다. 이걸 맞추니, 코드 자체도 dfs처럼 깔끔해졌다. **현재 상태값들과 다음 상태값들을 완전히 분리할 수 있어서 좋았다.**

![image-20221226023927182](/Users/yoon/Library/Application Support/typora-user-images/image-20221226023927182.png)

정리해서 말해보자면, 재귀는 결국 dfs로 귀결시킬 수 있다. 한개의 상태에서 출발할 수 있다면, 완전히 그렇게 할 수 있다는 자신감을 갖고 코드를 작성하자. 이때 시작점이 1개로 주어지지 않는다면, 기본 상태를 생각해보자. 아무것도 없는 상태를 생각하면 쉬울 것이다.



음 말이 너무 중구난방으로 나온 것 같은데 정리를 좀 해보겠다.

1. 재귀는 dfs로 생각하자. 코드를 작성하는 패턴도 비슷하게 가져가는 것이다.
   - 가장 중요한 패턴은, **하나의 현재 상태에서 다음 상태들로 넘어간다고 생각**해야한다.
   - 현재 상태에서, 다음 상태값들을 만들어서 재귀함수의 파라미터로 넘겨준다고 생각하자.
     - y,x 로 ny,nx를 만들어서 dfs(ny,nx) 넘겨주는 것 생각하기



2. 시작점이 하나로 특정되지 않으면, **기본 상태를 시작점으로 두기**
   - 기본 상태는 그냥 아무것도 없는 상태이다. depth로 따지면 0이고, ans로 따지면 공백, 즉 []이나 ' ' 이다. 이걸 첫 상태로 생각하면 된다.



3. **현재 상태에서 갈 수 있는 다음 상태들의 집합 알아내기** **(== 하나의 단계 기준, 고를 수 있는 상태값들의 집합 알아내기)**

   - 이게 진짜 완전 중요한 것 같다. dfs를 많이 해서 그래프에서는 이 상태값들이 그냥 다음 노드들이니까 쉽다. 근데, 그래프가 아니면 어려워진다. 현재 상태에서 갈 수 있는 다음 상태들을 파악하던가, 하나의 단계에서 고를 수 있는 상태값들을 잘 파악하자. 그 집합들만 잘 알면, 그냥 dfs와 똑같이 하면 된다.

   - [예시]

     - dfs : 연결된 다음 노드들

     - n과m : 주어진 숫자들
       - 1,2,3 이 주어진다면, 결국 1,2,3 중에 선택해서 갈 수 있음