1

자 이제까지 프로세스 그 다음에 프로세스문맥
그리고 문맥교환 등에 대하여 이야기를 풀어봤습니다
이러한 모든 것에
배경에는 **시분할 시스템이 전제되어 있다**
여러분들이 다 이해하고 있을 것이라고 믿습니다

자 시분할 시스템에서는
각 프로세스가 중단과 속개를 반복하게 되어 있기 때문에
문맥들도 잘 보존해야 될 뿐만 아니라
문맥들이 교환이 일어난다는 것이죠

헌데 이렇게 프로세스가 중단과 속개를 반복한다고 만 이야기하기에는
너무 모호합니다

그 이야기는 중단된 상태와 실행되는 상태
이렇게 두 상태밖에 없다는 것인데요

사실 그것보다는 더 복잡하고 다양한 상태가 존재합니다



특히 운영체제의 종류에 따라서
그 상태들의 차이가 크고 다양한데요
본 강의에서는 강의
주교제에 나와 있는 **가장 기본적인 다섯 가지 상태**를 중심으로
설명을 하고자 합니다

지금 **생성 준비 실행 대기 종료** 이렇게 다섯 가지 상태인데요
명칭이 얼핏 보면 비슷비슷하기도 합니다
그래서 영어로도 알았으면 아주 좋겠습니다
특히 
준비는 ready 상태다 
실행은 running 상태다
대기는 blocked 상태다
이런 영어 용어를 잘 알아두면 참 좋겠습니다

---

2

자 각 상태가 뜻하는 바는 여기 있는 것들과 같습니다
한번 읽어보겠습니다

자 생성 은 프로세스가 생성된 상태로 나중에 따로 설명 하겠지만
pcb와 메모리상의 주소공간이 마련된 상태
즉 pcb이라는 커널 내 자료구조와 사용자 문맥이겠죠
메모리상의 주소공간이 이 프로세스를 위해서 마련된 상태

준비는 cpu에 배정을 기다리고 있는 상태
큐가 하나 있는데
그 큐에 들어와서 스케쥴링
되기를 기다리고 있는 상태인거죠

실행은 프로세스가 CPU 에 의해서
실행되고 있는 상태
만약에 코아가 하나 있다면
코아가 돌리는 프로세스는 한순간에 하나겠죠
그래서 실행중에 있는 프로세스는 하나겠죠

자 대기는 프로세스가 어떤 사건이 발생하기를
기다리고 있는 상태
또 사건의 예로는 입출력 의 완료라든지
시그널의 접수이런 것들을 들을 수가 있는데요
이러한 이벤트가 발생하기 전까지는 cpu를
배정받을 수가 없기 때문에 대기 상태에 있어야 합니다

자 끝으로 종료는 프로세스에 실행 과정을 마치고
종료과정을 거쳐서 종료된 상태

이 생t성과 종류에 대해서는
나중에 좀 자세히 이야기하도록 하고

우선은 준비 실행
대기 의 상태에 대해서 좀 자세히
먼저 이야기 하도록 하겠습니다

---

3

이상에서 설명한 다섯 가지 상태는
각각 따로 존재하는 것이 아니겠죠
즉 서로 연계되어 있습니다
즉 한 상태에서 다른 상태로
이동을 해 다닌다는 것인데요

그것을 **프로세스 상태 천이**라고 그럽니다
즉 **프로세스 스테이트 트렌지션**라고 부르죠
이와 같이 서로 간에
천의 관계를 다이아그램 으로 나타나는 것이 프로세스상태천이
도
즉 프로세스 스테이트 트랜지션 다이어그램이라고 합니다

참고로 천이라는 단어가 생소하다고들 하더군요
전이라는 것과 혼동되는가 봅니다

전이라는 것은 어디로 옮아간다거나
장소를 옮겼다 할 때 사용하는 용어고요
상태가 이 상태에서 다른 상태로 바뀌는 것
즉 된다는 것을 천이라고 합니다



아무튼 지난 페이지에서 설명했던 다섯 개의 상태에
천이도는 이 그림과 같습니다
아주 중요한 그림인데요

다이어그램상의 노드가 상태이고
노드 간의 방향 있는 연결이 상태 천이을 이야기합니다
아마 운영 체제라는 과목을 한 학기 듣고 났을 때
꼭 기억해야 되는 몇 가지 그림이 있는데
그 중에 하나가 바로 이 그림이라고 저는 생각합니다



자 우리가 일반적으로 사용하고 있는 운영체제들은 이 상태천이도가
좀 더 복잡할 뿐만 아니라
운영체제목적과 성격에 따라 다르고
그것이 운영체제의 경쟁력을 좌우하기도 하죠

만약 실시간 운영체제인 경우는
실행모드가 세분화되어 있을 수도 있습니다

특히 전력 소모를 더 낮추는 것이
특징인 운영체제는 대기 상태가
보다 세분화되어 있을 수도 있죠

그리고 그에 따라서 상태천이도도 달라지게 됩니다 자
잠시 후 상태 천이도를 하나하나
자세히 설명을 하도록 하겠고요 

이 시점에서는 전체적으로
프로세스에 일생이라는 측면을 놓고 볼 때
왼편에 있는 프로세스의 생성
상태가 일생의 시작이 되겠고

오른편에 종료상태가 일생의 마감이 되겠습니다

그리고 일생동안 주로 가운데 있는
세계의 상태를 수없이 돌아다니게 됩니다

이렇게 갖다 가요
다시 또 이렇게 갖다가 이렇게 가기도 하고
여기서 갔다가 다시 오기도 하고
갔다가 다시 들어갔다가 이르러 가기도 하고
정신없이 왔다갔다 하겠죠

그게 바로 프로세스가 수행되는 그런 과정인 거죠
즉 준비상태로 있다가 실행상태로 가고
실행상태에 있다가 다시 준비상태로 오거나
대기 상태로 갑니다
만약 대기상태로 갔다면
해당 이벤트를 기다리다가
그 이벤트가 발생하면 다시 준비상태로 가고
그렇게 되는 겁니다

자 이전에 보여드렸던 슬라이드에서 문맥교환시점을 설명하면서
**자발적 문맥교환과 비자발적 문맥교환**이 있고

**각각 두 가지씩의 경우**가 있다고 설명한 바 있습니다

---

4

여기 있는 바와 같이 **할당 시간 경과, 인터럽트 발생**
이것이 비자발적 문맥교환이 발생되는 경우로 이 경우는
곧바로 준비상태로 천이를 합니다
자 사건을 기다리기 위해 블록될 이유가 없기 때문이죠

한편 **입출력 요청이나 시그널 대기**
그러한 것들은 자발적 문맥교환에 해당하는 것으로 

대기상태로 처리했다가
입출력 이 끝나거나
시그널이 도착하면 준비상태로 천이 됩니다
즉 입출력 이 완료되거나
사건 또는 시그널이 접수가 완료되면 준비상태로 간다이거죠

자 여기서 한 가지 중요한 점은
**어떠한 경우이든 cpu를 할당 받아 실행되는 실행상태, 이 실행 상태로**
**천이 되기 위해서는 반드시 준비상태를 거쳐서야만 실행 생태로 천이될 수 있다**
즉 스케줄러 에 의해서가 cpu가 할당 되어야만 실행상태로 간다는 거죠

자 이 상태천이 저는 아까도 얘기한 것처럼
운영체제과목전체를 통틀어 **꼭 기억해야 할 그림 중에 하나**이므로
잘 기억해두기 바랍니다

자 그럼 지금부터 5 개
상태중에서 가운데에 있는
세계 상태에 대해서 좀 더 자세히 설명하도록 하겠습니다

---

5

먼저 준비상태입니다 

이 준비 상태라는 것은 언제든지
여건만 되면 실행이 될 수 있도록 준비된 상태
**스케쥴링 에 의해서 선택만 되면 언제든지 실행이 될 수 있는 상태**
그것을 준비 상태라고 한다 이거죠

자 이 그림에서 준비 상태를 빠져나가는 화살표는 몇 개 인가요
여기서 빠져나가는 화살표는 여기 있는 바와 같이 하나 이죠

그 대상은 실행상태로 가는 화살표입니다

즉 **프로세스가 cpu에 의해서 실행되기 위해서는 반드시 준비상태를 거쳐야 한다**는 것인데요
결국 리스트 준비리스트 또는 준비 큐를 통과해야만 한다는 것이죠
여기에 준비리스트 나 준비 큐가 있다 이겁니다
자 왜 자꾸 준비큐라고 하지 않고
때로는 준비리스트 라고도 하는지 의심스러울 텐데요

사실 스케줄러가 큐만 사용하는 것은 아니죠 라고 하면
큐 first in first out 이 원칙인데요
그렇게 원칙만 사용하는 것은 아니기 때문에
그렇게 혼용해서 부를 수 밖에 없습니다
그건 나중에 스케쥴링
알고리즘을 공부 하면 자연스럽게 알게 될 것 같습니다

자 그럼 준비상태로 들어오는 화살표는 몇 개 인가요
네 세개죠 이렇게 세 개입니다

자 준비상태로 처리해 들어오는 세계의 천이
화살표를 보면 각각 생성 상태에서 들어오거나
대기상태에 있다가 들어오거나
실행상태에 있다가 들어오거나 합니다

**즉 프로세스로 생성되고 나면**
**바로 실행상태로 들어가는 것이 아니라 먼저 준비상태로 들어간다**
이거죠

또한 실행상태에 있다가 타임 슬레이스가 경과하거나
인터럽트가 발생하면
비자발적 문맥교환이 일어나서 cpu를 회수당하고
이렇게 준비상태로 이렇게 들어올 수가 있는 겁니다

자 아울러 대기상태에 있다가 밑에 대기상태에 있다가
기다리던 입출력 이 완료되거나
시그널이 접수되면 역시 준비상태로 들어갑니다

자 그리고 어떤 경로로 준비 상태에 들어갔던 간에
스케줄러에 의해서
선택되지 않으면 cpu를 할당 받을 수는 없는 거죠



**여기서 cpu를 할당 받는다는 뜻은** 
**cpu가 정해진 타임 슬라이스 동안 그 프로세스를 실행시킨다는 뜻으로**
**생각하면 되겠습니다**

자 상태 천이도를 놓고 볼 때 **스케쥴링** 이라는 것은 뭐냐
**바로 준비 상태에 준비리스트 또는 준비 큐에 있는 것을**
**뭔가의 원칙에 의해서 하나 선택해서 cpu가 수행할 수 있도록**
**타임 슬라이스 를 배정해주는 것**

그것을 이제 스케쥴링 이라고 하는 거죠 

---

6

다음은 실행상태입니다
실행 상태라는 것은
한마디로 가 프로세스를 실행하고 있는 상태를 뜻합니다
시분할 시스템의 경우 당연히 최대로 주어진 할당 시간
즉 타임 슬라이스 동안 실행될 것입니다
그러나 항상 그런 것은 아니겠죠
여기에 실행상태에서 밖으로 나가는
화살표가 몇 개가 있나요
여기 하나 있고 여기 하나있고 여기 하나 있죠
**세개**죠 하나씩 살펴보도록 합시다



먼저 맨 위에 있는 화살표 입니다
자 일단 실행 상태에서
**할당 시간** 이 지나고 나면
**회수가 되어서 준비상태로 천이**가 되고요
자 그렇게 되면 스케쥴링을 통해서
다른 준비 상태에 있는 프로세스들과
우선순위경쟁을 하게 되겠죠

자 지금까지 이야기한 건
할당 시간이 경과된 경우 에 대한 이야기였고요



물론 할당 시간이 모두 경과되지 않더라도
자 입출력 지역으로부터 어떤 인터럽트 가 발생했다 이 프로세스랑
관련이 있는 인터럽트 등 관련이 있지 않은 인터럽트
든 입출력 지역으로부터 어떤 인터럽트가 발생하면
이때도 역시 준비상태로 처리가 됩니다
**사실 쫓겨나는거죠**

이처럼 할당 시간이 경과되거나
인 트럭 트가 발생하게 될 경우 를 회수당하고
**비자발적 문맥교환 과정을 거쳐**
**준비상태로 처리되는 것**이 바로 이 화살표가 되겠습니다



자 이번에는 밑으로 내려오는
화살표입니다 이 부분입니다
주어진 할당 시간 동안 프로세스를 실행하다 보면
코드의 내용에 따라서
두 모드 중에 한 모드에 있게 되겠죠 

이 이야기는 이중모드 이야기할 때 이야기를 이미 한번 했습니다
**즉 사용자 모드 이거나 커널모드 입니다**

자 사용자 모드를 실행하고 있거나
커널 모드를 실행하고 있게 되는 거죠

특히 실행 상태중 사용자 모드로 실행 되다가 **입출력을 요청하거나**
**다른 프로세스 로부터 들어오는 시그널에 대해서**
**대기**를 요청하게 되면
이는 **시스템 호출을 수행**하게 되는 거죠

자 시**스템 호출를 수행하게 되고**
**결국 트랩과정을 거쳐서 커널 모드로 진입**되게 됩니다

여러분들이 아마 설명을 들었던 부분입니다
자 이로 인해서 **프로세스는 결국 해당 입출력 이 완료되거나**
**시그널이 접수될 때까지 블록**되게 되겠죠

즉 그러한 과정을 거쳐서
이렇게 대기상태로 내려가게 됩니다

자 다시 말해서 사용자 프로그램이 사용자 모드로 수행되다가
타임 슬라이스 가 소진될 수도 있겠지만

그렇지 않고 **시스템 콜를 하게 되면**
**커널모드로 들어가서 커널부분에**
**코드를 수행을 하게 되는데**

**그러다가 입출력을 요청하거나**
**시그널대기를 하는 그러한 내용을 수행하게 되면**

**대기 상태로 들어가게 돼 있다**



한편 프로세스가 실행되다 보면 결국 프로그램의 끝을 맞이하거나
exit 같은 시스템 콜이 호출되면
결국 퇴출과정을 거치게 되죠

자 그것이 바로 종료상태로 천이 되게 되는 것을 이야기합니다

자 이 과정은 프로세스생성과 함께
추후 별도로 설명을 더 하도록 하겠습니다

---

7

자 이번엔 대기상태입니다
방금 전에 실행 상태에서 커널모드로 실행하다가
대기 상태로 천이 되어가는 일련의 작용을 잠시 설명했는데요

이렇게 **대기상태로 가면 블록되게 됩니다**
블록된 기간 동안은 기간동안은 cpu가 더 이상 프로세스를 수행할 필요가 없어지는 거죠
따라서 cpu를 반납을 하게 되는데요

이렇게 대기상태로 들어가면 프로세스는
**사건 별로 구성된 대기 리스트 로 이동을 해서 대기**하게 됩니다

그런 후 **대기하던 사건이 완료되면**
**다시 준비상태로 천이**을 하게 됩니다

자 여기서 사건이라고 자꾸 얘기했지만
사실은 사건만 해당되는 것이 아니라 입출력도 마찬가지입니다
여기 기다리고 있는 입출력
기다리고 있는 사건들에 큐가
또는 리스트가 여기 있고
거기에 잠시 들어가서 블록된다 이 뜻이죠

자 이렇게 대기상태에 있는 동안
**입출력 장치는 입출력을 진행하고 있을 것이고요**
**어떤 프로세스는 이 프로세스 에게**
**시그널을 보낼 준비를 하고 있을 것입니다**

그럼 cpu는 무엇을 하고 있을까요
네 이미 알고 있듯이

**cpu는 준비 상태에 있던 프로세스들 중에**
**하나를 스케줄러를 통해서 선택해서**
**실행을 시키고 있을 것입니다**



자 그래서 이렇게 **대기 상태가 존재한다는 것**은 

**입출력 장치와 cpu가 overlap되어서 동시에 동작할 수 있는 기회를 제공하는 것**이다
이렇게 볼 수가 있겠습니다

자 이렇게 해서 준비상태 실행 상태
대기상태 등 3 개 상태에 대한 설명을 마무리하고요

조금 더 디테일한 주제인 pcb와 같은
이러한 주제들을 설명한 후에
추후 따로 설명을 하도록 하겠습니다