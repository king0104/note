## db 연동 문제

pom.xml 에서 버전을 확인해보자. mysql과 mysql-connnector 연결이 맞지 않아서 틀린 것 일수도 있다.





## aop

Main 함수 기준 설명

1. 스프링 컨테이너 생성
   - 이때, 스프링 빈으로 등록된다
   - 스프링 설정 클래스에 @EnableAspectJAutoProxy가 있으면, AOP 적용
   - **이 말은 즉슨, pointcut에 해당하는 메서드를 가지고 있는 빈 객체에 AOP를 적용한다는 뜻이다.**
     - "AOP를 적용한다" 라는 말의 의미 :  pointcut에 해당하는 메서드를 가지고 있는 빈 객체를 스프링 빈으로 등록할 때, **가짜 빈 객체(프록시 객체)를 만들어 빈 객체로 등록**한다는 뜻이다.
2. getBean()을 통해 빈 객체를 불러온다. 이때 가져오는 빈 객체는 **프록시 객체**이다!!
3. 프록시 객체.메서드 ( = cal.factorial(5) )를 호출하게 된다. 
4. *근데 이제 여기서는 프록시 객체의 구조를 모르니까 실행 결과를 가지고 프록시 객체가 행동되는 방식을 유추한다.*
5. "프록시 객체.@Around가 붙은 공통 기능 메서드" 를 실행한다. joinPoint는 포인트컷 된 대상 객체의 메서드를 의미한다.
6. 그렇게 공통 기능을 쭉 수행하다가, joinPoint.proceed를 만난다. 핵심 기능을 이때 수행하게 된다. 대상 객체로 들어가, 핵심 메서드를 수행한 후, 결과를 리턴해온다.
7. 프록시 객체에서 나머지 공통 기능을 수행한다





1. 파라미터로 받는 joinPoint는, main에서 프록시 객체.메서드 로 호출하는 그 메서드이다. 그래서 **joinPoint.proceed를 통해 실제 빈 객체의 메서드가 실행**된다.



---

### 조인포인트 & 포인트컷의 의미

조인포인트(Joinpoint) : 클라이언트가 호출하는 **모든 비즈니스 메소드**, 조인포인트 중에서 포인트컷되기 때문에 포인트컷의 후보로 생각할 수 있다.

포인트컷(Pointcut) : 특정 조건에 의해 필터링된 조인포인트, 수많은 조인포인트 중에 특정 메소드에서만 횡단 공통기능을 수행시키기 위해서 사용한다.

- 표현식 : 리턴타입 패키지경로 클래스명 메소드명(매개변수)



출처: https://sjh836.tistory.com/157 [빨간색코딩]



---

pointcut을 이용해서 어디에 공통 기능이 들어갈 지 체크하는 것이다.

스프링 빈에 aop를 적용하는 특수한 빈을 등록해두면, aop 빈이 pointcut 과 around 설정을 이용해서 스프링 컨테이너에 존재하는 나머지 빈에 대해 해당 설정을 적용하는 것이다. 그렇게 aop를 스프링 빈 객체에 적용하게 되는 것이다.



### aop 장난감 가지고 놀기

1. aop를 여러 개의 빈 객체에 적용해보기 - 스프링 설정 클래스에 빈 여러개 등록 후 실행결과 확인
   - **같은 프록시 객체**를 사용하여 aop를 실행하였다!! - 하나의 스프링 컨테이너의 실행과 종료 사이에서는 하나의 프록시 객체를 사용하는 것 같다.





### aop 사용하는 방법  - 김영한

1. aspect 붙이기
2. 스프링 빈으로 등록하기 - 컨테이너에 명시해주는 것이 좋음



- 스프링 컨테이너 안에서 동작한다 => 즉, 스프링 빈 객체에 대해서 공통기능을 적용할 때 사용한다.



1. aop를 어디에 적용할 지 지정하게 된다.
2. aop를 적용할 빈 객체 스프링 빈에 등록할 
3. 때, 진짜 스프링 빈이 아니라, 가짜 스프링 빈을 앞에 세워둔다. 즉, "가짜 객체"를 만든다. 이 말은 즉슨 프록시 객체를 만든다는 뜻이다.
4. 이제 이 프록시 객체를 통해 aop가 실행된다.
5. jointPoint.proceed()를 하면 진짜 빈 객체가 호출이 된다.

## 질문

- test 코드 작성하는 법. 모듈 추가를 어떻게 하는지 모르겠습니다.

- ![image-20210903022649552](C:\Users\4545a\AppData\Roaming\Typora\typora-user-images\image-20210903022649552.png)

이게 어떤 의미인가요?

- @Component를 이용해서 빈 객체를 등록하려고 했는데, 잘 되지 않는 것 같습니다. 봐주시면 감사하겠습니다.
- 클래스 이름.메서드 이름 사이에 .을 찍기도 하고 안찍기도 하는 건가요?



- ch11 서버 실행 위해 톰캣 연동하기 실패. - 하... 왜 안될까요

