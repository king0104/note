15. 개발 도중 해결하기 힘든 문제가 발생했을 때 해결한 경험이 있다면 최대한 자세히 작성해주세요. 



제가 스프링을 거의 처음 접했을 때, RestTemplate을 사용해서 간단하게 GET, POST, PUT, DELETE API를 만드는 연습을 해보았습니다. 직전에 spring과  JpaRepository를 이용해서controller, service, dao, entity 레이어를 만들어 하나의 테이블에 대한 CRUD를 만들어보았기 때문에, 그것을 기반으로 API를 만드는 것을 해보려 했던 것입니다.



먼저, RestTemplate을 사용하는 것 자체부터 문제가 발생했습니다. 어떤 식으로 코드를 작성하는지 몰라, 관련 예제를 찾아 코드를 읽어보았습니다. 하지만 이때도 문제가 발생했는데, Header와 Body를 만드는 작업이 코드 내에 존재했는데 그것을 이해하지 못했기 때문입니다. 모르는 상태였지만 대충 이해하고 제가 만든  tableCRUD 예제에 적용해보려 했지만, 당연하게 에러가 발생했습니다. 심지어, 당시의 저로서는 구글링을 통해 이해를 했다고 생각하고 적용한 것이였는데 왜 안되지?? 라는 생각을 했습니다. 하지만, 제가 이해한 것은 '대충'이였습니다. 당시의 문제를 이야기해보겠습니다.



대충 이해하고 진행한 내용은 다음과 같습니다. RestTemplate은 서버와 서버 간 통신을 진행하는 것입니다. 그래서, RestTemplate의 exchange 메서드를 통해 POST API를 만들어보고, 잘 적용되는지 확인해보는 것이 목표였습니다.

몇가지 예제를 검색해보니, header와 body가 등장했습니다. 예제들에서 주로 등장한 것은, MultiValueMap을 사용하여 body를 만들고, header는 주로 HttpHeaders headers = new HttpHeaders()를 통해 만들었습니다. 그리고 headers.setContentType(MediaType.APPLICATION_JSON) 을 지정해주어야 했습니다. 그 후, 본격적으로 RestTemplate의 exchange 메서드를 사용하는 것이였습니다. POST 요청을 보낼 서버 주소와, 요청 방식(POST), 요청할 때 보낼 데이터, 요청 후 리턴받는 데이터 타입을 각각 인자로 받는 것을 알고, 진행했습니다. 이해한 내용을 바탕으로 코드를 실행시켰는데, 에러가 등장했습니다. 찬찬히 살펴보아도 어떤 문제인지 알 수 없었습니다. 에러를 해결하는 것이 개발자가 성장하는 길이라는 이야기는 많이 들어봤기에, 구글링과 내 열정 이 두개만 있으면 뭐든지 할 수 있다는 생각으로 끝까지 달려들었습니다.



그러다, 갑자기 의문이 들었습니다. 

"지금 내가 뭘 하고 있는 거지?", "어떤 에러를 잡으려고 무엇을 확인하고 있는 것이지?"

갑자기 머릿속이 하애졌습니다. 당장 저에게 남은 건, 열정이 남긴 수많은 크롬 탭과 여전히 해결되지 않은 에러 메세지였습니다. 수많은 정보가 남긴 것은 불확실함이였습니다. 계속 하나씩 무작정 검색하고 읽고 복사 붙여넣기를 하면서 에러가 뜨는지 안뜨는지 실험하면서 진행하다보니, 제가 어떤 것을 진행하는지조차 헷갈렸습니다. exchange의 메서드 활용법도, header와 body를 만드는 방법도, 심지어 RestTemplate의 정확한 사용 목적도 제 입으로 바로 말할 수가 없었습니다. 이번 작업은 저에게 익숙하지 않고 새로운 것들이 많았기에, 구글링 할 때에는 이해됐더라도 시간이 조금 지나니 정확하게 내용이 떠오르지 않았습니다. 이때, 뼈저리게 느꼈습니다. 구글과 열정만이 답이 아니라는 것을. 그때 다짐했습니다. "무조건, 정리하면서 개발하자."



다시 시작했습니다. RestTemplate이란 무엇인지부터 다시 시작했습니다. 기록하면서, 다시 시작했습니다. 99퍼센트를 알고 1퍼센트만 추가적인 공부를 하는 것이라면, 그 자리에서 내용을 외워버릴 수도 있을 것입니다. 하지만, 개발이라는 것이 그런 것이 아닌 것임을 깨달았습니다. 많은 것을 배우고, 다양한 에러를 만나는 상황에서 기록하지 않으면 이해한 것조차 잊어버린다는 것을 깨달았습니다.



이때, 저는 큰 나무에서 시작해서 작은 나뭇가지들을 알아가는 방식으로 기록하며 진행했습니다. RestTemplate에선, 먼저 RestTemplate이라는 새로운 내용이 큰 나무 하나가 됩니다. 이때, 예제를 살펴보면, header와 body가 나오는데, 이것이 바로 작은 나뭇가지 하나가 됩니다. 그렇게 header와 body 살펴보다가, 그 안에서 더 자세한 내용이 존재하면 더 작은 나뭇가지를 하나 더 뻗습니다. 이런 식으로 점진적으로 깊게 파고드는 공부 방식을 적용하니, 제가 사용하고자 하는 큰 내용을 부분적으로 쪼개서 이해하게 되고, 결국에는 큰 틀을 제대로 이해할 수 있는 도구가 되었습니다. 

위와 마찬가지로, 기록을 할 때도 RestTemplate 개요 -> header/body 만들기 -> MultiValueMap<String, String>의 의미 와 같은 식으로 뻗어나가니, 하나를 이해하고 상위 개념을 이해하기에 훨씬 수월했습니다. body와 MultiValueMap을 각각 공부하다보면 개별적으로만 이해하게 되는데, 이런 식으로 정리하다 보니, MultiValueMap이 결국 body를 만들기 위한 전초과정임을 알았습니다. 그리고 결국, MultiValueMap으로 만드는 body는, RestTemplate의 POST API가 하는 역할이 서버로 데이터를 전달하는 것이기 때문에, API가 전달하는 데이터를 의미한다는 것을 알게 되었습니다.

개별적으로 알고 있던 개념을 큰 개념부터 작은 개념까지 연관관계를 가진 것으로 이해하고, 작은 개념부터 차근차근히 알아가다 보니, 전체를 이해하는데 훨씬 수월했습니다. 실제로, 저는 이 과정에서 에러의 이유를 찾았습니다.

제가 이미 작성한 TableCRUD 프로젝트에서는 데이터를 전달 받을 때 @RequestBody 어노테이션을 사용합니다. 즉, JSON 객체를 받는다는 것인데, 구글링을 통해 주로 발견한 예제들은 다 MultiValueMap을 사용하였기 때문에 에러가 발생한 것입니다. "MultiValueMap을 통해 전달하려면, @RequestParam을 사용하여 데이터를 전달받아야 했겠구나" 라는 추가적인 생각까지 해낼 수 있었습니다. 그렇게 오류를 발견하고, JSON 객체를 전달해야하기 때문에 body를 다시 만들어야 한다는 것을 이해했습니다.  JSON 객체를 전달해야한다는 것을 알기 때문에, 구글에 어떤 내용을 검색해야하는 지도 확실했습니다. "자바 JSON 객체 만들기". JSONObject를 사용해서 만들고, put을 통해 해당 객체에 들어갈 데이터를 넣어줄 수 있었습니다.

그렇게 문제가 되는 부분을 해결하고, 나머지 부분도 큰 내용에서 작은 내용으로 각 단계별 TO-DO 리스트를 작성해나가며 하나씩 차근차근 진행하다 보니 "RestTemplate을 이용한 POST API 만들기"를 완성했습니다. 



제가 혼자 이걸 해결했을 때 너무 기뻐서 카페에서 같이 공부하던 (API가 뭔지도 모르는)친구한테 API가 뭐고 내가 작성한 코드가 이런 데이터를 넘기는 것이고, 그리고 결과로 이런 값을 받아서 이런 결과가 뜨는거라고 혼자 신나서 설명했던 기억이 납니다. 



사실 당시 작성했던 코드는 길이도 길지 않고, 어려운 개념이 아니라고 생각합니다. 하지만, 저에게는 어떤 것을 스스로 해낼 수 있다는 자신감과 뿌듯함을 느낀 사건이자, 앞으로 어떻게 개발하고 에러를 해결해야 하는지 스스로 깨달았던 정말 뜻깊은 시간이였습니다.









- 관련 기본 개념 숙지

- 관련 예제를 따라쳐본다
- 상황에 맞게 수젖ㅇ해본다
- 해결해야 하는 문제가 생기면, 체크박스와 함께 바로바로 적어둔다
- 문제 파악을 한다